<?xml version="1.0" encoding="UTF-8"?>
<ipfix xmlns="urn:ietf:params:xml:ns:yang:ietf-ipfix-psamp">

	<!--## Every collecting process will be started as new process -->
	<collectingProcess>
		<!--## Arbitrary collecting process name  -->
		<name>UDP collector</name>
		<!--## Type of the collector. Supported types are defined in internalcfg.xml -->
		<udpCollector>
			<!--## Arbitrary udp collector name -->
			<name>Listening port 4739</name>
			<!--## Local listening port -->
			<localPort>4739</localPort>
			<!--## Template lifetime in seconds -->
			<templateLifeTime>1800</templateLifeTime>
			<!--## Options template lifetime in seconds -->
			<optionsTemplateLifeTime>1800</optionsTemplateLifeTime>
			<!--## Template lifetime in packets (for how many packets is template valid) -->
			<!-- <templateLifePacket>5</templateLifePacket>  -->
			<!--## Options template lifetime in packets -->
			<!-- <optionsTemplateLifePacket>100</optionsTemplateLifePacket>  -->
			<!--## Local address to listen on. If empty, bind to all interfaces -->
			<localIPAddress></localIPAddress>
		</udpCollector>
		<!--## Name of the exporting process. Must match exporting process name -->
		<!-- exportingProcess>File writer UDP</exportingProcess -->
		<exportingProcess>JSON writer UDP</exportingProcess>
		<!--## File for exporting status information to (combined with -S) -->
		<statisticsFile>/home/john/log/ipfixcol_stat.log</statisticsFile>
	</collectingProcess>

	<!-- collectingProcess>
		<name>TCP collector</name>
		<tcpCollector>
			<name>Listening port 4739</name>
			<localPort>4739</localPort>
			<localIPAddress></localIPAddress>
		</tcpCollector>
		<exportingProcess>File writer TCP</exportingProcess>
	</collectingProcess -->

	<!-- collectingProcess>
		<name>SCTP collector</name>
		<sctpCollector>
			<name>Listening port 4739</name>
			<localPort>4739</localPort>
			--><!--## Collector will listen on all addresses specified below --><!--
			<localIPAddress>127.0.0.1</localIPAddress>
			<localIPAddress>::1</localIPAddress>
		</sctpCollector>
		<exportingProcess>File writer SCTP</exportingProcess>
	</collectingProcess -->

	<!--## Exporting process configuration -->

        <!-- exportingProcess>
                <name>File writer UDP</name -->
                <!-- destination>
                        <name>Write to /tmp folder</name>
                        <observationDomainId>0</observationDomainId>
                        <fileWriter>
                                <fileFormat>ipfix</fileFormat>
                                <file>file://home/john/flows/ipfix-udp_domain0.record</file>
                        </fileWriter>
                </destination>
                <destination>
                        <name>Write to /tmp folder</name>
                        <observationDomainId>1</observationDomainId>
                        <fileWriter>
                                <fileFormat>ipfix</fileFormat>
                                <file>file://home/john/flows/ipfix-udp_domain1.record</file>
                        </fileWriter>
                </destination>
                <destination>
                        <name>Write to /tmp folder</name>
                        <observationDomainId>2</observationDomainId>
                        <fileWriter>
                                <fileFormat>ipfix</fileFormat>
                                <file>file://home/john/flows/ipfix-udp_domain2.record</file>
                        </fileWriter>
                </destination>
                <destination>
                        <name>Write to /tmp folder</name>
                        <observationDomainId>3</observationDomainId>
                        <fileWriter>
                                <fileFormat>ipfix</fileFormat>
                                <file>file://home/john/flows/ipfix-udp_domain3.record</file>
                        </fileWriter>
                </destination -->
                <!-- destination>
                        <name>Write to /tmp folder</name>
                        <fileWriter>
                                <fileFormat>ipfix</fileFormat>
                                <file>file://home/john/flows/ipfix-udp.record</file>
                        </fileWriter>
                </destination>
        </exportingProcess -->


	<exportingProcess>
	  <name>JSON writer UDP</name>
          <!-- singleManager>yes</singleManager --> 
	  <destination>
	      <name>JSON storage plugin</name>
	      <fileWriter>
	         <fileFormat>json</fileFormat>
	         <metadata>no</metadata>
	         <tcpFlags>formated</tcpFlags>
	         <timestamp>epoc</timestamp>
	         <protocol>formated</protocol>
	         <ignoreUnknown>no</ignoreUnknown>
                 <nonPrintableChar>yes</nonPrintableChar>
                 <!-- output>
                   <type>print</type>
                 </output -->
                 <!--output>
                   <type>send</type>
                   <ip>127.0.0.1</ip>
                   <port>4444</port>
                   <protocol>udp</protocol>
                 </output -->
                 <output>
                   <type>file</type>
                   <path>/home/john/flows/</path>
                   <prefix>json.</prefix>
                   <dumpInterval>
                     <timeWindow>300</timeWindow>
                     <timeAlignment>yes</timeAlignment>
                   </dumpInterval>
                 </output>
                 <!-- output>
                   <type>server</type>
                   <port>4800</port>
                   <blocking>no</blocking>
                 </output -->
               </fileWriter>
             </destination>
	</exportingProcess>
	
	<!-- exportingProcess>
		<name>File writer TCP</name>
		<destination>
			<name>Write to /tmp folder</name>
			<fileWriter>
				<fileFormat>ipfix</fileFormat>
				<file>file://tmp/collected-records-tcp.ipfix</file>
			</fileWriter>
		</destination>
       -->
		<!--## Enable single Data manager - only one instance of storage plugin(s)
		shared between every ODID -->
		<!-- <singleManager>yes</singleManager>  -->
	<!-- /exportingProcess -->

	<!-- exportingProcess>
		<name>File writer SCTP</name>
		<destination>
			<name>Store data using ipfix file format</name>
			<fileWriter>
				<fileFormat>ipfix</fileFormat>
				<file>file://tmp/collected-records-sctp.ipfix</file>
			</fileWriter>
		</destination>
	</exportingProcess -->

	<!-- List of active Intermediate Plugins -->
	<intermediatePlugins>
		<!-- Dummy Intermediate Plugin - does nothing -->
		<!--dummy_ip>
		</dummy_ip -->
                <odip>
                </odip>
		
		<!-- Configuration for Anonymization Intermediate Plugin -->
		<!--
		<anonymization_ip>
			<type>cryptopan</type>
		</anonymization_ip>
		-->
		
		<!-- Configuration for next Anonymization Intermediate Plugin -->
		<!--
		<anonymization_ip>
			<type>truncation</type>
		</anonymization_ip>
		-->
		
		<!-- Configuration for joinflows plugin -->
		<!-- <joinflows_ip>	-->
			<!-- Set destination ODID -->
			<!-- <join to="2"> -->
				<!-- Set source ODIDs for this dst ODID -->
				<!-- <from>1</from>	-->
				<!-- <from>3</from> -->
			<!-- </join> -->
			<!-- Set another destination ODID -->
			<!-- <join to="4"> -->
				<!-- <from>5</from> -->
				<!-- All ODIDs not mentioned in any <join> block 
				  will be mapped on this dst ODID -->
				<!-- <from>*</from> -->
			<!-- </join> -->
		<!-- </joinflows_ip> -->
	</intermediatePlugins>
</ipfix>
